<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./../../style/style.css" />
    <title>Face Recognition App</title>

    <!-- <script defer src="./../../script/script-dashboard.js"></script> -->
    <!-- <script defer type="module" src="./../../script/script-model.js"></script> -->
</head>
<body>
    <!-- <button onclick="evaluate()">Evaluate</button> -->
    <!-- Untuk cek atau testing model, liat confusion matrix juga di sini bisa -->

    <!-- <div id="originalImages"></div>

    <div id="landmarks"></div>

    <div id="descriptors"></div> -->

    <img src="./../../img_300/000001.jpg" />
    <img src="./../../img_300/000002.jpg" />
    <img src="./../../img_300/000003.jpg" />
    <img src="./../../img_300/000004.jpg" />
    <img src="./../../img_300/000005.jpg" />
    <img src="./../../img_300/000006.jpg" />
    <img src="./../../img_300/000007.jpg" />
    <img src="./../../img_300/000008.jpg" />
    <img src="./../../img_300/000009.jpg" />
    <img src="./../../img_300/000010.jpg" />
    <img src="./../../img_300/000011.jpg" />
    <img src="./../../img_300/000012.jpg" />
    <img src="./../../img_300/000013.jpg" />
    <img src="./../../img_300/000014.jpg" />
    <img src="./../../img_300/000015.jpg" />
    <img src="./../../img_300/000016.jpg" />
    <img src="./../../img_300/000017.jpg" />
    <img src="./../../img_300/000018.jpg" />
    <img src="./../../img_300/000019.jpg" />
    <img src="./../../img_300/000020.jpg" />
    <img src="./../../img_300/000021.jpg" />
    <img src="./../../img_300/000022.jpg" />
    <img src="./../../img_300/000023.jpg" />
    <img src="./../../img_300/000024.jpg" />
    <img src="./../../img_300/000025.jpg" />
    <img src="./../../img_300/000026.jpg" />
    <img src="./../../img_300/000027.jpg" />
    <img src="./../../img_300/000028.jpg" />
    <img src="./../../img_300/000029.jpg" />
    <img src="./../../img_300/000030.jpg" />
    <img src="./../../img_300/000031.jpg" />
    <img src="./../../img_300/000032.jpg" />
    <img src="./../../img_300/000033.jpg" />
    <img src="./../../img_300/000034.jpg" />
    <img src="./../../img_300/000035.jpg" />
    <img src="./../../img_300/000036.jpg" />
    <img src="./../../img_300/000037.jpg" />
    <img src="./../../img_300/000038.jpg" />
    <img src="./../../img_300/000039.jpg" />
    <img src="./../../img_300/000040.jpg" />
    <img src="./../../img_300/000041.jpg" />
    <img src="./../../img_300/000042.jpg" />
    <img src="./../../img_300/000043.jpg" />
    <img src="./../../img_300/000044.jpg" />
    <img src="./../../img_300/000045.jpg" />
    <img src="./../../img_300/000046.jpg" />
    <img src="./../../img_300/000047.jpg" />
    <img src="./../../img_300/000048.jpg" />
    <img src="./../../img_300/000049.jpg" />
    <img src="./../../img_300/000050.jpg" />
    <img src="./../../img_300/000051.jpg" />
    <img src="./../../img_300/000052.jpg" />
    <img src="./../../img_300/000053.jpg" />
    <img src="./../../img_300/000054.jpg" />
    <img src="./../../img_300/000055.jpg" />
    <img src="./../../img_300/000056.jpg" />
    <img src="./../../img_300/000057.jpg" />
    <img src="./../../img_300/000058.jpg" />
    <img src="./../../img_300/000059.jpg" />
    <img src="./../../img_300/000060.jpg" />
    <img src="./../../img_300/000061.jpg" />
    <img src="./../../img_300/000062.jpg" />
    <img src="./../../img_300/000063.jpg" />
    <img src="./../../img_300/000064.jpg" />
    <img src="./../../img_300/000065.jpg" />
    <img src="./../../img_300/000066.jpg" />
    <img src="./../../img_300/000067.jpg" />
    <img src="./../../img_300/000068.jpg" />
    <img src="./../../img_300/000069.jpg" />
    <img src="./../../img_300/000070.jpg" />
    <img src="./../../img_300/000071.jpg" />
    <img src="./../../img_300/000072.jpg" />
    <img src="./../../img_300/000073.jpg" />
    <img src="./../../img_300/000074.jpg" />
    <img src="./../../img_300/000075.jpg" />
    <img src="./../../img_300/000076.jpg" />
    <img src="./../../img_300/000077.jpg" />
    <img src="./../../img_300/000078.jpg" />
    <img src="./../../img_300/000079.jpg" />
    <img src="./../../img_300/000080.jpg" />
    <img src="./../../img_300/000081.jpg" />
    <img src="./../../img_300/000082.jpg" />
    <img src="./../../img_300/000083.jpg" />
    <img src="./../../img_300/000084.jpg" />
    <img src="./../../img_300/000085.jpg" />
    <img src="./../../img_300/000086.jpg" />
    <img src="./../../img_300/000087.jpg" />
    <img src="./../../img_300/000088.jpg" />
    <img src="./../../img_300/000089.jpg" />
    <img src="./../../img_300/000090.jpg" />
    <img src="./../../img_300/000091.jpg" />
    <img src="./../../img_300/000092.jpg" />
    <img src="./../../img_300/000093.jpg" />
    <img src="./../../img_300/000094.jpg" />
    <img src="./../../img_300/000095.jpg" />
    <img src="./../../img_300/000096.jpg" />
    <img src="./../../img_300/000097.jpg" />
    <img src="./../../img_300/000098.jpg" />
    <img src="./../../img_300/000099.jpg" />
    <img src="./../../img_300/000100.jpg" />

    <img src="./../../img_300/000101.jpg" />
    <img src="./../../img_300/000102.jpg" />
    <img src="./../../img_300/000103.jpg" />
    <img src="./../../img_300/000104.jpg" />
    <img src="./../../img_300/000105.jpg" />
    <img src="./../../img_300/000106.jpg" />
    <img src="./../../img_300/000107.jpg" />
    <img src="./../../img_300/000108.jpg" />
    <img src="./../../img_300/000109.jpg" />
    <img src="./../../img_300/000110.jpg" />
    <img src="./../../img_300/000111.jpg" />
    <img src="./../../img_300/000112.jpg" />
    <img src="./../../img_300/000113.jpg" />
    <img src="./../../img_300/000114.jpg" />
    <img src="./../../img_300/000115.jpg" />
    <img src="./../../img_300/000116.jpg" />
    <img src="./../../img_300/000117.jpg" />
    <img src="./../../img_300/000118.jpg" />
    <img src="./../../img_300/000119.jpg" />
    <img src="./../../img_300/000120.jpg" />
    <img src="./../../img_300/000121.jpg" />
    <img src="./../../img_300/000122.jpg" />
    <img src="./../../img_300/000123.jpg" />
    <img src="./../../img_300/000124.jpg" />
    <img src="./../../img_300/000125.jpg" />
    <img src="./../../img_300/000126.jpg" />
    <img src="./../../img_300/000127.jpg" />
    <img src="./../../img_300/000128.jpg" />
    <img src="./../../img_300/000129.jpg" />
    <img src="./../../img_300/000130.jpg" />
    <img src="./../../img_300/000131.jpg" />
    <img src="./../../img_300/000132.jpg" />
    <img src="./../../img_300/000133.jpg" />
    <img src="./../../img_300/000134.jpg" />
    <img src="./../../img_300/000135.jpg" />
    <img src="./../../img_300/000136.jpg" />
    <img src="./../../img_300/000137.jpg" />
    <img src="./../../img_300/000138.jpg" />
    <img src="./../../img_300/000139.jpg" />
    <img src="./../../img_300/000140.jpg" />
    <img src="./../../img_300/000141.jpg" />
    <img src="./../../img_300/000142.jpg" />
    <img src="./../../img_300/000143.jpg" />
    <img src="./../../img_300/000144.jpg" />
    <img src="./../../img_300/000145.jpg" />
    <img src="./../../img_300/000146.jpg" />
    <img src="./../../img_300/000147.jpg" />
    <img src="./../../img_300/000148.jpg" />
    <img src="./../../img_300/000149.jpg" />
    <img src="./../../img_300/000150.jpg" />
    <img src="./../../img_300/000151.jpg" />
    <img src="./../../img_300/000152.jpg" />
    <img src="./../../img_300/000153.jpg" />
    <img src="./../../img_300/000154.jpg" />
    <img src="./../../img_300/000155.jpg" />
    <img src="./../../img_300/000156.jpg" />
    <img src="./../../img_300/000157.jpg" />
    <img src="./../../img_300/000158.jpg" />
    <img src="./../../img_300/000159.jpg" />
    <img src="./../../img_300/000160.jpg" />
    <img src="./../../img_300/000161.jpg" />
    <img src="./../../img_300/000162.jpg" />
    <img src="./../../img_300/000163.jpg" />
    <img src="./../../img_300/000164.jpg" />
    <img src="./../../img_300/000165.jpg" />
    <img src="./../../img_300/000166.jpg" />
    <img src="./../../img_300/000167.jpg" />
    <img src="./../../img_300/000168.jpg" />
    <img src="./../../img_300/000169.jpg" />
    <img src="./../../img_300/000170.jpg" />
    <img src="./../../img_300/000171.jpg" />
    <img src="./../../img_300/000172.jpg" />
    <img src="./../../img_300/000173.jpg" />
    <img src="./../../img_300/000174.jpg" />
    <img src="./../../img_300/000175.jpg" />
    <img src="./../../img_300/000176.jpg" />
    <img src="./../../img_300/000177.jpg" />
    <img src="./../../img_300/000178.jpg" />
    <img src="./../../img_300/000179.jpg" />
    <img src="./../../img_300/000180.jpg" />
    <img src="./../../img_300/000181.jpg" />
    <img src="./../../img_300/000182.jpg" />
    <img src="./../../img_300/000183.jpg" />
    <img src="./../../img_300/000184.jpg" />
    <img src="./../../img_300/000185.jpg" />
    <img src="./../../img_300/000186.jpg" />
    <img src="./../../img_300/000187.jpg" />
    <img src="./../../img_300/000188.jpg" />
    <img src="./../../img_300/000189.jpg" />
    <img src="./../../img_300/000190.jpg" />
    <img src="./../../img_300/000191.jpg" />
    <img src="./../../img_300/000192.jpg" />
    <img src="./../../img_300/000193.jpg" />
    <img src="./../../img_300/000194.jpg" />
    <img src="./../../img_300/000195.jpg" />
    <img src="./../../img_300/000196.jpg" />
    <img src="./../../img_300/000197.jpg" />
    <img src="./../../img_300/000198.jpg" />
    <img src="./../../img_300/000199.jpg" />
    <img src="./../../img_300/000200.jpg" />

    <img src="./../../img_300/000201.jpg" />
    <img src="./../../img_300/000202.jpg" />
    <img src="./../../img_300/000203.jpg" />
    <img src="./../../img_300/000204.jpg" />
    <img src="./../../img_300/000205.jpg" />
    <img src="./../../img_300/000206.jpg" />
    <img src="./../../img_300/000207.jpg" />
    <img src="./../../img_300/000208.jpg" />
    <img src="./../../img_300/000209.jpg" />
    <img src="./../../img_300/000210.jpg" />
    <img src="./../../img_300/000211.jpg" />
    <img src="./../../img_300/000212.jpg" />
    <img src="./../../img_300/000213.jpg" />
    <img src="./../../img_300/000214.jpg" />
    <img src="./../../img_300/000215.jpg" />
    <img src="./../../img_300/000216.jpg" />
    <img src="./../../img_300/000217.jpg" />
    <img src="./../../img_300/000218.jpg" />
    <img src="./../../img_300/000219.jpg" />
    <img src="./../../img_300/000220.jpg" />
    <img src="./../../img_300/000221.jpg" />
    <img src="./../../img_300/000222.jpg" />
    <img src="./../../img_300/000223.jpg" />
    <img src="./../../img_300/000224.jpg" />
    <img src="./../../img_300/000225.jpg" />
    <img src="./../../img_300/000226.jpg" />
    <img src="./../../img_300/000227.jpg" />
    <img src="./../../img_300/000228.jpg" />
    <img src="./../../img_300/000229.jpg" />
    <img src="./../../img_300/000230.jpg" />
    <img src="./../../img_300/000231.jpg" />
    <img src="./../../img_300/000232.jpg" />
    <img src="./../../img_300/000233.jpg" />
    <img src="./../../img_300/000234.jpg" />
    <img src="./../../img_300/000235.jpg" />
    <img src="./../../img_300/000236.jpg" />
    <img src="./../../img_300/000237.jpg" />
    <img src="./../../img_300/000238.jpg" />
    <img src="./../../img_300/000239.jpg" />
    <img src="./../../img_300/000240.jpg" />
    <img src="./../../img_300/000241.jpg" />
    <img src="./../../img_300/000242.jpg" />
    <img src="./../../img_300/000243.jpg" />
    <img src="./../../img_300/000244.jpg" />
    <img src="./../../img_300/000245.jpg" />
    <img src="./../../img_300/000246.jpg" />
    <img src="./../../img_300/000247.jpg" />
    <img src="./../../img_300/000248.jpg" />
    <img src="./../../img_300/000249.jpg" />
    <img src="./../../img_300/000250.jpg" />
    <img src="./../../img_300/000251.jpg" />
    <img src="./../../img_300/000252.jpg" />
    <img src="./../../img_300/000253.jpg" />
    <img src="./../../img_300/000254.jpg" />
    <img src="./../../img_300/000255.jpg" />
    <img src="./../../img_300/000256.jpg" />
    <img src="./../../img_300/000257.jpg" />
    <img src="./../../img_300/000258.jpg" />
    <img src="./../../img_300/000259.jpg" />
    <img src="./../../img_300/000260.jpg" />
    <img src="./../../img_300/000261.jpg" />
    <img src="./../../img_300/000262.jpg" />
    <img src="./../../img_300/000263.jpg" />
    <img src="./../../img_300/000264.jpg" />
    <img src="./../../img_300/000265.jpg" />
    <img src="./../../img_300/000266.jpg" />
    <img src="./../../img_300/000267.jpg" />
    <img src="./../../img_300/000268.jpg" />
    <img src="./../../img_300/000269.jpg" />
    <img src="./../../img_300/000270.jpg" />
    <img src="./../../img_300/000271.jpg" />
    <img src="./../../img_300/000272.jpg" />
    <img src="./../../img_300/000273.jpg" />
    <img src="./../../img_300/000274.jpg" />
    <img src="./../../img_300/000275.jpg" />
    <img src="./../../img_300/000276.jpg" />
    <img src="./../../img_300/000277.jpg" />
    <img src="./../../img_300/000278.jpg" />
    <img src="./../../img_300/000279.jpg" />
    <img src="./../../img_300/000280.jpg" />
    <img src="./../../img_300/000281.jpg" />
    <img src="./../../img_300/000282.jpg" />
    <img src="./../../img_300/000283.jpg" />
    <img src="./../../img_300/000284.jpg" />
    <img src="./../../img_300/000285.jpg" />
    <img src="./../../img_300/000286.jpg" />
    <img src="./../../img_300/000287.jpg" />
    <img src="./../../img_300/000288.jpg" />
    <img src="./../../img_300/000289.jpg" />
    <img src="./../../img_300/000290.jpg" />
    <img src="./../../img_300/000291.jpg" />
    <img src="./../../img_300/000292.jpg" />
    <img src="./../../img_300/000293.jpg" />
    <img src="./../../img_300/000294.jpg" />
    <img src="./../../img_300/000295.jpg" />
    <img src="./../../img_300/000296.jpg" />
    <img src="./../../img_300/000297.jpg" />
    <img src="./../../img_300/000298.jpg" />
    <img src="./../../img_300/000299.jpg" />
    <img src="./../../img_300/000300.jpg" />

    <!-- <script src="./../../script/tf.min.js"></script> -->
    <script src="./../../script/face-api.js"></script>
    <script>
        // let label = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        const MODEL_URL = './../../models'
        
        async function loadModel() {
            await faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL)
            await faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL)
            await faceapi.nets.ssdMobilenetv1.loadFromUri(MODEL_URL)
            console.log('Model loaded!')
        }

        async function firstInference() {
            console.log('Start Inference')

            let TP = 0
            let FN = 0

            const imgs = document.querySelectorAll('img')
            const dataUrl = []

            for (let i = 0; i < imgs.length; i++) {
                const tempCanvas = document.createElement('canvas')
                tempCanvas.width = imgs[i].width
                tempCanvas.height = imgs[i].height
                const tempCtx = tempCanvas.getContext('2d')

                tempCtx.drawImage(imgs[i], 0, 0)
                const url = tempCanvas.toDataURL()
                dataUrl.push(url)
            }

            for (let i = 0; i < dataUrl.length; i++) {
                const image = document.createElement('img')
                image.src = dataUrl[i]
                const detection = await faceapi.detectAllFaces(image)

                if (!detection[0]) {
                    console.log(`${i + 1} - No Face`)
                    FN++
                }

                else {
                    console.log(`${i + 1} - Face`)
                    TP++
                }
            }

            console.log('Total True Positive (TP) =', TP)
            console.log('Total False Negative (FN) =', FN)
            console.log('Inference done.')
        }

        async function init() {
            await loadModel()
            await firstInference()
        }

        init()
    </script>
</body>
</html>